<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>











  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="从大神中来，到大神中去">
<meta property="og:type" content="website">
<meta property="og:title" content="Lin Mulan">
<meta property="og:url" content="http://snake1999.com/index.html">
<meta property="og:site_name" content="Lin Mulan">
<meta property="og:description" content="从大神中来，到大神中去">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Lin Mulan">
<meta name="twitter:description" content="从大神中来，到大神中去">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://snake1999.com/"/>





  <title> Lin Mulan </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?1b954cffd0bc1054ea005c9876a69bf5";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Lin Mulan</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://snake1999.com/2016/12/03/noip2015-day1-t3-landlords/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Lin Mulan">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://snake1999.com/images/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Lin Mulan">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Lin Mulan" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/03/noip2015-day1-t3-landlords/" itemprop="url">
                  NOIP2015 Day1 T3 斗地主
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-03T08:33:15+08:00">
                2016-12-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/OI/" itemprop="url" rel="index">
                    <span itemprop="name">OI</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/12/03/noip2015-day1-t3-landlords/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/03/noip2015-day1-t3-landlords/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>NOIP2015 Day1 T3 斗地主</p>
<p>题目意思就是说给你一副扑克牌手牌，按照题目中的规则你可以出单张、对子、带牌、顺子等牌型，问你最少需要几次可以把牌出完。</p>
<p>这题显然是一道搜索题，对于棋牌类的搜索题，状态复杂，搜索深度低，我们最好使用深搜。我们明确一下深搜的一般套路就是，首先判断目标状态，然后剪枝，下面遍历下一层。</p>
<p>我们先把题目中的牌型归一下类。首先是顺子型，和牌的数字有关，数量也有关；然后带牌，只和两种牌的数量有关；最后单牌、对子、三张和炸弹，只和数量有关。</p>
<p>首先因为可以打单张，这题是一定有解的，我们可以放心的搜下去。</p>
<p>关于顺子，我们<del>通过生活经验</del>可以发现，如果有几张数字连着的牌，最好使用顺子而不是单打，因为这样的解更小，更优。然后顺子里面也可以分类，假如我们有<code>5 5 6 6 7 7 8 9</code>几张牌，如果先打单顺子那么就会多不少单牌，所以我们要先打大的顺子，再打小的。最后因为顺子会拆掉不少牌型，需要注意顺子的长度也需要枚举，打不打也需要枚举，读者可以自己举几个例子想一想。</p>
<p>在我们枚举了顺子之后，就剩下了带牌和单张、对子等。因为带牌、单张等与数字无关，这时候我们可以把牌按数量分类。首先枚举带牌，因为单张、对子打出去会拆掉带牌，然后从长到短，四带两对，四带一对，三带对，三带一。最后只需要把所有无法打出带牌的牌直接丢出去即可——因为不管你的牌是一张到四张，按照本题的牌型可以一次打完。</p>
<p>这样我们理清了思路：深搜，枚举打顺子的状态，然后贪心带牌和单张、一对、三张、炸弹。最后需要注意的是，因为本题的手牌不止一副，我们需要在开始搜索之前重新初始化。开始敲代码吧 :)</p>
<p>于是AC代码是这样的：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div></pre></td><td class="code"><pre><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#define FOR(x,f,t) for(x=f;x&lt;=t;++x)</div><div class="line">#define RFOR(x,f,t) for(x=f;x&gt;=t;--x)</div><div class="line">#define MEMSET(a,b) memset(a,b,sizeof(a))</div><div class="line">#define M 1000005</div><div class="line">#define ll long long</div><div class="line">#define oo 0x3f3f3f3f</div><div class="line">using namespace std;</div><div class="line">template&lt;class T&gt;void MAX(T &amp;a,T b) &#123;if(a&lt;b)a=b;&#125;</div><div class="line">template&lt;class T&gt;void MIN(T &amp;a,T b) &#123;if(a&gt;b)a=b;&#125;</div><div class="line">template&lt;class T&gt;void rd(T &amp;a) &#123; //读入外挂</div><div class="line">	char c;a=0;</div><div class="line">	while(c=getchar(),!isdigit(c));</div><div class="line">	do a=(a&lt;&lt;3)+(a&lt;&lt;1)+(c^48);</div><div class="line">	while(c=getchar(),isdigit(c));</div><div class="line">&#125;	</div><div class="line"></div><div class="line">int T,n;</div><div class="line">int V[20]; //joker==0 2==2 3~K==3~13 A==14</div><div class="line">int cnt[5]; //张数是i的牌的种类数量 </div><div class="line">int gao() &#123; //处理散牌：炸弹，三张，对子，单张，带牌 </div><div class="line">	MEMSET(cnt,0);</div><div class="line">	int i,j,ans=0;</div><div class="line">	FOR(i,0,14) cnt[V[i]]++; </div><div class="line">	while(cnt[4]&gt;=1&amp;&amp;cnt[2]&gt;=2) cnt[4]-=1, cnt[2]-=2, ans+=1; //4+2+2</div><div class="line">	while(cnt[4]&gt;=1&amp;&amp;cnt[1]&gt;=2) cnt[4]-=1, cnt[1]-=2, ans+=1; //4+1+1</div><div class="line">	while(cnt[3]&gt;=1&amp;&amp;cnt[2]&gt;=1) cnt[3]-=1, cnt[2]-=1, ans+=1; //3+2</div><div class="line">	while(cnt[3]&gt;=1&amp;&amp;cnt[1]&gt;=1) cnt[3]-=1, cnt[1]-=1, ans+=1; //3+1</div><div class="line">	ans+=cnt[4]+cnt[3]+cnt[2]+cnt[1]; //四张三张一对单张</div><div class="line">	return ans;</div><div class="line">&#125;</div><div class="line">int dfs(int step) &#123;</div><div class="line">	int i,j,k,t,ans=oo;</div><div class="line">	ans=gao(); //这句话代码意味深长。如果dfs到这里之后，已经没有顺子了，那么这时候只能贪心吃散牌，下面return的就是这个ans；如果还有顺子，那么下面顺子出来的结果一定会比ans小而覆盖掉这里。</div><div class="line">  	//下面枚举状态的同时判断是不是终止状态（没顺子了），需要好好体会</div><div class="line">	FOR(i,3,14-2+1) &#123; //3顺 </div><div class="line">		k=0; </div><div class="line">		FOR(j,i,14+1) if(V[j]&lt;3) &#123;k=j-1;break;&#125; //此时k为最大的三张连牌的结尾</div><div class="line">		if(k-i+1&lt;2) continue; //如果连牌数量太小，不满足三顺子的条件，那就continue</div><div class="line">      	//如果代码能执行到这里，说明[i,k]范围是一个合法的三顺子。</div><div class="line">		RFOR(t,k,i+2-1) &#123; //枚举顺子长度。k-i+1即三顺子长度，可能会大于最大长度2。</div><div class="line">			FOR(j,i,t) V[j]-=3; //制造现场</div><div class="line">			MIN(ans,dfs(step+1)+1); //向下一层搜索</div><div class="line">			FOR(j,i,t) V[j]+=3; //还原现场</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	FOR(i,3,14-3+1) &#123; //2顺 </div><div class="line">		k=0; </div><div class="line">		FOR(j,i,14+1) if(V[j]&lt;2) &#123;k=j-1;break;&#125;</div><div class="line">		if(k-i+1&lt;3) continue;</div><div class="line">		RFOR(t,k,i+3-1) &#123;</div><div class="line">			FOR(j,i,t) V[j]-=2;</div><div class="line">			MIN(ans,dfs(step+1)+1);</div><div class="line">			FOR(j,i,t) V[j]+=2;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	FOR(i,3,14-5+1) &#123; //1顺 </div><div class="line">		k=0;</div><div class="line">		FOR(j,i,14+1) if(V[j]&lt;1) &#123;k=j-1;break;&#125;</div><div class="line">		if(k-i+1&lt;5) continue;</div><div class="line">		RFOR(t,k,i+5-1) &#123;</div><div class="line">			FOR(j,i,t) V[j]-=1;</div><div class="line">			MIN(ans,dfs(step+1)+1);</div><div class="line">			FOR(j,i,t) V[j]+=1;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	return ans;</div><div class="line">&#125;</div><div class="line">int solve() &#123;</div><div class="line">	return dfs(0);</div><div class="line">&#125;</div><div class="line">int main () &#123; </div><div class="line">	rd(T),rd(n);</div><div class="line">	int i,j;</div><div class="line">	FOR(i,1,T) &#123;</div><div class="line">		int a,b;</div><div class="line">		MEMSET(V,0);</div><div class="line">		FOR(j,1,n)&#123;</div><div class="line">		 	rd(a);</div><div class="line">		 	if(a==1) a=14; //把A放到14，这样枚举顺子方便</div><div class="line">			V[a]++;</div><div class="line">			rd(b);</div><div class="line">		&#125;</div><div class="line">		int ans=solve();</div><div class="line">		printf("%d\n",ans);</div><div class="line">	&#125;</div><div class="line">	return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>by lmlstarqaq<br>with $2^{2^{n}}$ times of thanks to Spylft</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://snake1999.com/2016/11/09/noi-oj-6252-string-match/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Lin Mulan">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://snake1999.com/images/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Lin Mulan">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Lin Mulan" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/09/noi-oj-6252-string-match/" itemprop="url">
                  字符串匹配系列问题 & NOI OJ 6252 带通配符的字符串匹配 题解
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-09T08:30:43+08:00">
                2016-11-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/OI/" itemprop="url" rel="index">
                    <span itemprop="name">OI</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/11/09/noi-oj-6252-string-match/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/11/09/noi-oj-6252-string-match/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="一个字符串带通配符的字符串匹配"><a href="#一个字符串带通配符的字符串匹配" class="headerlink" title="一个字符串带通配符的字符串匹配"></a>一个字符串带通配符的字符串匹配</h2><p>请看题（NOI OJ 6252） <a href="http://noi.openjudge.cn/ch0206/6252/" target="_blank" rel="external">http://noi.openjudge.cn/ch0206/6252/</a></p>
<p>题目大意就是，带通配符的字符串$A$和普通的字符串$B$长度都满足$al\le 20, bl\le 20$，$A$中可能有星号$*$可以匹配0个或多个任意字符，还可能有问号$?$可以匹配正好一个字符，问$B$是否能匹配字符串$A$。</p>
<p>这道题我刚拿到时是一脸懵逼的。不过研究题目后，我注意到了题目的特点：</p>
<ol>
<li>问题可以分割为有意义的子问题。就是说，如果把字符串$A​$的前几个字符组成的子串$m​$，和$B​$中前几个字符组成的子串$n​$，把$m​$和$n​$单独挑出来替换题中的$A​$和$B​$，这个问题依然有意义。</li>
<li>问题没有后效性。就是说子串$m$和$n$是否有解，与$A$和$B$后半部分的字符无关。</li>
</ol>
<p>思索再三<del>看到了题目的分类是动态规划</del>，我最后选择了动态规划来求解。</p>
<p>对于字符串$A$的第$i$个字符，有可能是星号、问号或者其它普通的字符。星号是最好处理的——末尾的星号意味着我们可以无视子串$n$剩下的部分。所以说如果有已经确认匹配的$m$和$n$字符串，在$m$后面加上一个星号形成$m’$，在$n$后面加上任意长度的任意字符串或者不加字符串形成$n’$，必有$m’$和$n’$依然匹配。</p>
<p>除了星号，问号和普通字符都只可以匹配1个字符，所以把他们放在一起考虑。普通字符的匹配规则是很显然的，如果两个字符相同那就匹配，那么对于已经确认匹配的字符串$m$和$n$，我们在$m$和$n$后面分别加上一个相同的字符，使他们成为$m’$和$n’$，那么$m’$和$n’$依然匹配。问号可以匹配任意的一个字符，那么将$m$加上一个问号变成$m’$，$n$加上任意的一个字符成为$n’$，一定有$m’$和$n’$匹配。</p>
<p>综上所述，对于任意已经确认匹配的字符串$m$和$n$，必定有以下匹配法则：</p>
<ol>
<li>$m$加一个星号，必定和$n$加上任意字符或不加字符匹配</li>
<li>$m$加一个问号，必定和$n$加上任意一个字符匹配</li>
<li>$m$加一个普通字符，必定和$n$加上相同的普通字符匹配</li>
</ol>
<p>这时候我们就可以定义状态。如果把$A$的前$i$项字符组成的串记为$m$，把$B$的前$j$项组成的串记为$n$，那么就可以定义布尔数组$dp[i][j]$记为$m$和$n$是否匹配。根据上面的匹配法则，可以得出这样的递推法则：</p>
<ol>
<li>如果<code>A[i]</code>是星号，只要${dp[i-1][k], 1\le k\le bl}$中有一个为真，那么$dp[i][j]$为真</li>
<li>如果<code>A[i]</code>是问号，而且$dp[i-1][j-1]$为真，那么$dp[i][j]$为真</li>
<li>如果<code>A[i]</code>是普通字符，而且$dp[i-1][j-1]$为真，而且<code>A[i]</code>和<code>B[j]</code>相同，那么$dp[i][j]$为真</li>
</ol>
<p>对于动态规划问题，我们还需要考虑边界条件。如果A、B是两个由一个相同普通字符组成的字符串，即$i=j=1$且 <code>A[i]=B[j]</code> ，显然$dp[1][1]$为真，按照递推法则3，必须要先有$dp[0][0]$为真——两个空的字符串我们不能认为他们不匹配。如果$A$只包含一个星号，即$i=1$且<code>A[1]</code>为星号，虽然我们得到了递推法则1，但我们似乎不能用赋初值的方法让$dp[0][k]$全部符合——那就特判一下吧。</p>
<p>这道题还有个坑的地方——字符串A和B可以包含空格！我一开始没有发现，然后用cin读入，自信满满的提交了代码以为能AC，结果WA了两组点，修改了用gets读入才得到AC。另外，这题数据范围不大，如果长度大还能用滚动数组优化空间复杂度，这里就不讲了。</p>
<p>AC代码是这样的：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">using namespace std;</div><div class="line">#define FOR(x,f,t) for(x=f;x&lt;=t;++x) </div><div class="line">#define M 25</div><div class="line">char A[M], B[M];</div><div class="line">bool dp[M][M];</div><div class="line">int al,bl,i,j,k;</div><div class="line">int main () &#123; </div><div class="line">	gets(A+1), gets(B+1); //读入有空格！</div><div class="line">	al=strlen(A+1), bl=strlen(B+1);</div><div class="line">	dp[0][0]=1; //赋初值，上文有提到</div><div class="line">	if(A[1]=='*') FOR(j,0,bl) dp[1][j]=1; //特判，一个星号能匹配所有的字符串</div><div class="line">	FOR(i,1,al) &#123;</div><div class="line">		if(A[i]=='*') FOR(j,1,bl) FOR(k,1,bl) dp[i][j]|=dp[i-1][k];</div><div class="line">		else FOR(j,1,bl) dp[i][j]=(dp[i-1][j-1]&amp;&amp;(A[i]==B[j]||A[i]=='?')); //这里把普通字符和问号合并了</div><div class="line">	&#125;</div><div class="line">	if(dp[al][bl]) cout&lt;&lt;"matched";</div><div class="line">	else cout&lt;&lt;"not matched";</div><div class="line">	return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>其实这个问题还有个升级版——</p>
<h2 id="两个字符串都带通配符的字符串匹配"><a href="#两个字符串都带通配符的字符串匹配" class="headerlink" title="两个字符串都带通配符的字符串匹配"></a>两个字符串都带通配符的字符串匹配</h2><p>不要给这标题吓到了。有了解决了一个字符串的通配符问题的经验，两个字符串都含通配符的匹配问题不是很难想。</p>
<p>当第二个字符串也出现通配符的时候，我们经过推敲，欣喜的发现的法则都没有变化——意味着我们的核心算法不需要做大的改动。唯一需要注意的是赋予初值时的小变化——赋予初值的时候注意把$A$和$B$都判断一次，判断星号问号的时候把$A$和$B$同时判断即可。</p>
<p>我们只需要对原来的代码做一些小更改，就能得到解决两个字符串都带通配符的匹配问题的代码：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">using namespace std;</div><div class="line">#define FOR(x,f,t) for(x=f;x&lt;=t;++x) </div><div class="line">#define M 25</div><div class="line">char A[M], B[M];</div><div class="line">bool dp[M][M];</div><div class="line">int al,bl;</div><div class="line">int main () &#123; </div><div class="line">	gets(A+1), gets(B+1);</div><div class="line">	al=strlen(A+1), bl=strlen(B+1);</div><div class="line">	int i,j,k;</div><div class="line">	dp[0][0]=1;</div><div class="line">	if(A[1]=='*') FOR(j,0,bl) dp[1][j]=1;</div><div class="line">	if(B[1]=='*') FOR(i,0,al) dp[i][1]=1; //同时赋初值</div><div class="line">	FOR(i,1,al) &#123; //这里从A的长度作为第一维，其实从A和B都是一样的</div><div class="line">		if(A[i]=='*'||B[i]=='*') FOR(j,1,bl) FOR(k,1,bl) dp[i][j]|=dp[i-1][k]; //同时判断星号</div><div class="line">		else FOR(j,1,bl) dp[i][j]=(dp[i-1][j-1]&amp;&amp;(A[i]==B[j]||A[i]=='?'||B[i]=='?')); //同时判断问号</div><div class="line">	&#125;</div><div class="line">	if(dp[al][bl]) cout&lt;&lt;"matched";</div><div class="line">	else cout&lt;&lt;"not matched";</div><div class="line">	return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>字符串匹配问题的应用非常广。我们在生产开发过程中常常有各种各样的字符串匹配和替换需求，这时候就可以用到<strong>正则表达式</strong>(regexp或regex)，这是一个比上面两个字符串匹配算法还要强大的引擎，许多编程语言都支持它，许多文本编辑器也使用它来完成查找替换。正则表达式辉煌的背后需要解决许多类似这样的字符串匹配问题，有兴趣的朋友们可以去百毒或者谷割了解一下。</p>
<p>最后感谢 <strong><a href="http://kyleyoung-ymj.github.io/" target="_blank" rel="external">KyleYoung神犇</a></strong> 的指导 :)</p>
<p>by lmlstarqaq</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://snake1999.com/2016/11/01/noi-oj-6043-time-machine-of-doraemon/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Lin Mulan">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://snake1999.com/images/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Lin Mulan">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Lin Mulan" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/01/noi-oj-6043-time-machine-of-doraemon/" itemprop="url">
                  NOI OJ 6043 哆啦A梦的时光机 题解
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-01T07:42:28+08:00">
                2016-11-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/OI/" itemprop="url" rel="index">
                    <span itemprop="name">OI</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/11/01/noi-oj-6043-time-machine-of-doraemon/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/11/01/noi-oj-6043-time-machine-of-doraemon/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>题目大意就是，时光机需要从时刻$S (0 &lt; S &lt; 1,000,000)$跳跃到时刻$T (0 &lt; T &lt; 1,000,000)$，当位于时刻$A$时，你可以跳转到时刻$A/2$(当$A$为偶数)、$A+1$、$A-1$、$A*2$，求最少需要的跳跃步数。</p>
<p>这题我一开始想到的是宽搜，但是提交上去却得到了一个TLE。在百般思索后我注意到，对于这个问题，每个合法的跳转步骤都：</p>
<ol>
<li>不会相互影响；</li>
<li>可逆，如你可以从$A$跳到$A+1$，也可以从$A+1$跳到$A$；</li>
<li>边界性相同，如对于每个时刻$A$，都有相同的$A&gt;0$。</li>
</ol>
<p>最后我选择了<strong>双向宽搜</strong>。双向宽搜是通过从出发点比如$S$，和结束点比如$T$，同时开始宽搜的搜索方法。它对解决这样的问题非常好用，而且会极大地节约时间。</p>
<p>和单向宽搜一样，双向宽搜需要写一个标记数组。但是对于这道题我遇到了棘手的麻烦：比如当$S=999,999 T=500,000$时，最优的跳跃步骤是这样的：</p>
<p>$$<br>999,999 → 1,000,000 → 500,000<br>$$</p>
<p>我们发现出现了$1,000,000$——在时刻跳跃的过程中，我们可以暂时让时刻超出$999,999$的上界，我们甚至不知道暂时出现的“超限”出的时刻的上界会有多大！这就意味着，在64MB内存显得捉襟见肘的情况下，双向宽搜的标记数组的容量需要经过谨慎的论证。经过 <strong><a href="http://blog.csdn.net/Spylft/" target="_blank" rel="external">Spylft神犇</a></strong> 的教导，我最终选择了$4,000,005$作为数组的大小。（注：这里不能用<code>vector</code>，因为<code>vector</code>效率不高，会得到TLE）</p>
<p>最后贴个AC代码：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;queue&gt;</div><div class="line">#include &lt;cstdlib&gt;</div><div class="line">#define FOR(x,f,t) for(x=f;x&lt;=t;++x)</div><div class="line">#define MEMSET(a,b) memset(a,b,sizeof(a))</div><div class="line">using namespace std;</div><div class="line">#define ll long long</div><div class="line">   #define M 4000005</div><div class="line">const int MM=2000000;</div><div class="line">int mk[M],mk1[M];	</div><div class="line">struct AC&#123;int t,step;&#125;;</div><div class="line">queue&lt;AC&gt; Q,R; //需要用两个队列，一个正向，一个反向</div><div class="line">int min1(int a,int b) &#123;</div><div class="line">	if (a==-1) return b;//a==INF</div><div class="line">	if (b==-1) return a;//b==INF</div><div class="line">	return a&gt;b?b:a;</div><div class="line">&#125;</div><div class="line">int solve(int from,int to) &#123; //双向宽搜</div><div class="line">	MEMSET(mk,-1);</div><div class="line">	MEMSET(mk1,-1);</div><div class="line">	while(!Q.empty()) Q.pop();</div><div class="line">	while(!R.empty()) R.pop();</div><div class="line">	Q.push((AC) &#123;from,0&#125;);</div><div class="line">	R.push((AC) &#123;to,0&#125;);</div><div class="line">	while(!Q.empty()&amp;&amp;!R.empty()) &#123;</div><div class="line">		AC n2=Q.front();Q.pop();</div><div class="line">		AC n3=R.front();R.pop();</div><div class="line">		int t=n2.t,s=n2.step;</div><div class="line">		int tt=n3.t,ss=n3.step;</div><div class="line">		mk[t]=min1(mk[t],s);</div><div class="line">		if (mk1[t]!=-1) &#123;</div><div class="line">			return mk1[t]+mk[t];</div><div class="line">		&#125;</div><div class="line">		mk1[tt]=min1(mk1[tt],ss);</div><div class="line">		if (mk[tt]!=-1) &#123;</div><div class="line">			return mk1[tt]+mk[tt];</div><div class="line">		&#125;</div><div class="line">        //下一层情况的条件</div><div class="line">		if (t*2&lt;=MM) if(mk[t*2]==-1) Q.push((AC)&#123;t*2, s+1&#125;);</div><div class="line">		if (tt%2==0) if(mk[tt*2]==-1) R.push((AC)&#123;tt/2, ss+1&#125;);</div><div class="line">		if (t%2==0) if (mk[t/2]==-1) Q.push((AC)&#123;t/2, s+1&#125;);</div><div class="line">		if (tt*2&lt;=MM) if (mk[tt*2]==-1) R.push((AC)&#123;tt*2, ss+1&#125;);</div><div class="line">		if (t+1&lt;=MM) if (mk[t+1]==-1) Q.push((AC)&#123;t+1, s+1&#125;);</div><div class="line">		if (tt-1&gt;=0) if (mk[tt-1]==-1) R.push((AC)&#123;tt-1, ss+1&#125;);</div><div class="line">		if (t-1&gt;=0) if(mk[t-1]==-1) Q.push((AC)&#123;t-1, s+1&#125;);</div><div class="line">		if (tt+1&lt;=MM) if(mk[tt+1]==-1) R.push((AC)&#123;tt+1, ss+1&#125;);</div><div class="line">	&#125;</div><div class="line">	return 0;</div><div class="line">&#125;</div><div class="line">int N,S,T;</div><div class="line">void rd(int &amp;a) &#123; //读入外挂</div><div class="line">	char c;a=0;</div><div class="line">	while(c=getchar(),!isdigit(c));</div><div class="line">	do a=(a&lt;&lt;3)+(a&lt;&lt;1)+(c^48);</div><div class="line">	while(c=getchar(),isdigit(c));</div><div class="line">&#125;</div><div class="line">void rd1() &#123; //解决每个情况</div><div class="line">	rd(S),rd(T);</div><div class="line">	int ans=solve(S,T)*2;</div><div class="line">	cout&lt;&lt;ans&lt;&lt;endl;</div><div class="line">&#125;</div><div class="line">int main()&#123; </div><div class="line">	cin&gt;&gt;N;</div><div class="line">	int i;</div><div class="line">	FOR(i,1,N) rd1();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>原题链接：<a href="http://noi.openjudge.cn/ch0407/6043/" target="_blank" rel="external">http://noi.openjudge.cn/ch0407/6043/</a></p>
<p>by lmlstarqaq</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://snake1999.com/2016/10/07/hello-world/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Lin Mulan">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://snake1999.com/images/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Lin Mulan">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Lin Mulan" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/07/hello-world/" itemprop="url">
                  Hello World
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-10-07T15:34:05+08:00">
                2016-10-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/想法与心得/" itemprop="url" rel="index">
                    <span itemprop="name">想法与心得</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/10/07/hello-world/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/10/07/hello-world/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>看起来我的博客是时候开张了~<br>有这个博客，还得感谢 <strong>KyleYoung</strong> 等神犇的支持。谢谢！</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://snake1999.com/images/avatar.png"
               alt="Lin Mulan" />
          <p class="site-author-name" itemprop="name">Lin Mulan</p>
          <p class="site-description motion-element" itemprop="description">从大神中来，到大神中去</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">4</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lin Mulan</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"snake1999"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  








  
  

  

  

  

  


</body>
</html>
